<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Cardano Staking</title>
  <link rel="icon" href="/favicon.ico" type="image/x-icon" />

  <style>
    body {
      background: #0d1117;
      color: #e6edf3;
      font-family: "Segoe UI", Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 600px;
      margin: 60px auto;
      text-align: center;
    }
    h1 {
      color: #58a6ff;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>Delegate ADA to PSP</h1>
    <p id="message">Loading CSL...</p>

    <div id="wallet-buttons"></div>
    <div id="delegate-section"></div>
  </div>

  <!-- Put this where your old CSL loader was -->
<script type="module">
  // 1) import the init function from the bg (glue) file
  import initWasm from "./libs/cardano_serialization_lib_bg.js";

  // 2) import the public API (named exports) from the top-level file
  import * as CSL from "./libs/cardano_serialization_lib.js";

  // 3) initialise the wasm explicitly by passing the wasm URL
  //    this avoids any automatic module-wasm import issues
  await initWasm("./libs/cardano_serialization_lib_bg.wasm");

  // 4) expose CSL and signal readiness
  window.Cardano = CSL;
  console.log("âœ… CSL Loaded (init from _bg.js)");
  window.dispatchEvent(new Event("csl-loaded"));
</script>

  <script type="module" src="./main.js"></script>
</body>
</html>
