<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Cardano Staking</title>
  <link rel="icon" href="/favicon.ico" type="image/x-icon" />

  <style>
    body {
      background: #0d1117;
      color: #e6edf3;
      font-family: "Segoe UI", Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 600px;
      margin: 60px auto;
      text-align: center;
    }
    h1 {
      color: #58a6ff;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>Delegate ADA to PSP</h1>
    <p id="message">Loading CSL...</p>

    <div id="wallet-buttons"></div>
    <div id="delegate-section"></div>
  </div>

  <!-- Manual WASM loader -->
  <script type="module">
    import * as CSL from "./libs/cardano_serialization_lib.js";

    async function loadCSL() {
      const wasmBytes = await fetch("./libs/cardano_serialization_lib_bg.wasm").then(r => r.arrayBuffer());
      const wasmInstance = await WebAssembly.instantiate(wasmBytes, {});
      CSL.__wbg_set_wasm(wasmInstance.instance.exports);

      window.Cardano = CSL;
      console.log("âœ… CSL Loaded (manual WASM init)");
      window.dispatchEvent(new Event("csl-loaded"));
    }

    loadCSL();
  </script>

  <script type="module" src="./main.js"></script>
</body>
</html>
